@import ../utils/variables
@import ../utils/mixins
@import ../../libs/include-media/dist/include-media

html
	font-size: 62.5%

	// блокировка скролла
	&.css-scroll-fixed:not(.css-scroll-fixed)
		+scroll-blocked()

	&.shutter-only-mob.css-scroll-fixed
		+media('<tab-lg')
			+scroll-blocked()

body
	position: relative
	+font-normal
	+font($font-size, $line-height)
	color: $text-color
	height: 100%
	min-width: 320px
	background: $bg-color url(../../img/empty.png) no-repeat left top fixed

	// выделение текста
	*::selection
		background-color: $base-color
		color: white

/* === LAYOUT ===
.max-wrap
	max-width: #{$page-layout-width + nth($page-layout-space, 2)*2}

	+media('<desk-sm')
		max-width: none

.layout
	+padding-horizontal(nth($page-layout-space, 2))
	+push-auto

	+media('<desk-sm')
		+padding-horizontal(nth($page-layout-space--md, 2))

	+media('<tab-lg')
		+padding-horizontal(nth($page-layout-space--sm, 2))

	+media('<mob-lg')
		+padding-horizontal(nth($page-layout-space--mob, 2))

// выравнивание текстовых элементов на странице статьи (контент обернут в .layout-article)
// и их максимальная ширина
//.layout-article
	padding: $text-layout-space

	+media('<tab-lg')
		padding: $text-layout-space--md

	+media('<tab-sm')
		padding: $text-layout-space--sm

	& > p, & > ul, & > ol, & > h1, & > h2, & > h3, & > h4, & > h5, & > h6, & > hr, & > blockquote, & > .layout-text, .imgc figcaption
		max-width: $text-layout-width
		+padding-horizontal(0)
		+push-auto

	.layout-flood
		max-width: $flood-layout-width
		+padding-horizontal(0)
		+push-auto

	// элеметы без отступов по бокам
	// минусовые маржины по горизонтале имеют значение только внутри .layout-article
	.layout-full-width, .layout-wide

		+margin-horizontal(-#{nth($text-layout-space, 2)})

		+media('<tab-lg')
			+margin-horizontal(-#{nth($text-layout-space--md, 2)})

		+media('<tab-sm')
			+margin-horizontal(-#{nth($text-layout-space--sm, 2)})

// максимальная ширина текстовых элементов на внутренней (текстовой) странице
.max-wrap-text
	max-width: #{$text-layout-width + (nth($text-layout-space, 2))*2}

	+media('<tab-lg')
		max-width: #{$text-layout-width + (nth($text-layout-space--md, 2))*2}

	+media('<tab-sm')
		max-width: #{$text-layout-width + (nth($text-layout-space--sm, 2))*2}

// выравнивание текстовых элементов на внутренней (текстовой) странице
// и их максимальная ширина
.layout-text
	max-width: #{$text-layout-width + (nth($text-layout-space, 2))*2}
	+padding-horizontal(nth($text-layout-space, 2))
	+push-auto

	+media('<tab-lg')
		max-width: #{$text-layout-width + (nth($text-layout-space--md, 2))*2}
		+padding-horizontal(nth($text-layout-space--md, 2))

	+media('<tab-sm')
		max-width: #{$text-layout-width + (nth($text-layout-space--sm, 2))*2}
		+padding-horizontal(nth($text-layout-space--sm, 2))

// максимальная ширина альтернативных элементов на внутренней (текстовой) странице
//.max-wrap-flood
	max-width: #{$flood-layout-width + (nth($text-layout-space, 2))*2}

	+media('<tab-lg')
		max-width: #{$flood-layout-width + (nth($text-layout-space--md, 2))*2}

	+media('<tab-sm')
		max-width: #{$flood-layout-width + (nth($text-layout-space--mob, 2))*2}

// выравнивание альтернативных элементов на внутренней (текстовой) странице
// и их максимальная ширина
//.layout-flood
	max-width: #{$flood-layout-width + (nth($text-layout-space, 2))*2}
	+padding-horizontal((nth($text-layout-space, 2)))
	+push-auto

	+media('<tab-lg')
		max-width: #{$flood-layout-width + (nth($text-layout-space--md, 2))*2}
		+padding-horizontal((nth($text-layout-space--md, 2)))

	+media('<tab-sm')
		max-width: #{$flood-layout-width + (nth($text-layout-space--sm, 2))*2}
		+padding-horizontal((nth($text-layout-space--sm, 2)))

	p, ul, ol, h1, h2, h3, h4, h5, h6, hr
		max-width: none

// элеметы с отступами по бокам
//.layout-wide
	+padding-horizontal((nth($text-layout-space, 2)))

	+media('<tab-lg')
		+padding-horizontal((nth($text-layout-space--md, 2)))

	+media('<tab-sm')
		+padding-horizontal((nth($text-layout-space--sm, 2)))

	p, ul, ol, h1, h2, h3, h4, h5, h6, hr
		max-width: none

// элеметы без отступов по бокам
//.layout-full-width

	p, ul, ol, h1, h2, h3, h4, h5, h6, hr
		max-width: none

// лэяут страницы
.wrapper
	display: flex
	flex-direction: column
	justify-content: space-between
	align-items: stretch
	margin: 0 auto
	min-height: 100%
	padding-top: 86px
	position: relative
	background: url(../../img/bg-img.png) center

	+media('<tab-lg')
		padding-top: 0

	.sep-page &
		+media('>desk-hd')
			background-attachment: fixed

		&::before
			content: ""
			display: none
			width: 50%
			height: 100%
			position: absolute
			left: 0
			top: 0
			background-color: $bg-color

			+media('>=tab-lg')
				display: block

/* === LAYOUT end ===

/* === CONTENT ===
.main
	flex-shrink: 1
	flex-grow: 1
	position: relative
	clear: both
	z-index: 4

	+padding-vertical(75px, 50px)

	+media('<tab-lg')
		+padding-vertical(50px, 40px)

	.sep-page &
		padding: 0

//.main__holder
//	width: 100%
//	+clear
//
//.content-wrap
//	float: left
//	width: 100%
//
//.content
//	margin: 0
//	min-height: 50px
//
//	+media('<desk-lg')
//		margin-right: 0
//
//	+media('<tab-lg')
//		margin-left: 0

/* === CONTENT end ===

/* === HEADER ===
.header
	width: 100% // нужно для браузеров не поддерживающих position: sticky
	min-width: 320px // нужно для браузеров не поддерживающих position: sticky
	margin: 0
	background-color: #403b38
	position: sticky
	top: 0
	z-index: 15
	transition:
		property: background-color
		duration: $animation-speed

	.shutter-after-open &
		+media('<tab-lg')
			background-color: $base-color-alt

	.layout
		+media('<tab-lg')
			padding: 0

.header__holder
	position: relative
	//display: flex
	//justify-content: space-between
	//align-items: center
	text-align: center
	height: $header-height
	padding: 0 nth($logo-size, 2) + 10
	z-index: 5

	+media('<tab-lg')
		padding: 0 $header-height

/* logo
.logo
	position: absolute
	left: 0
	top: 50%
	width: nth($logo-size, 2)
	margin: -#{round(nth($logo-size, 1)/2)} 0 0
	text-indent: -9999px
	text-align: left
	overflow: hidden
	z-index: 5

	+media('<tab-lg')
		width: nth($logo-short-size, 2)
		margin: -#{round(nth($logo-short-size, 1)/2)} 0 0 -#{round(nth($logo-short-size, 2)/2)}
		left: 50%

	&::before, &::after
		content: ""
		display: block
		$prop: opacity
		will-change: $prop
		transition:
			property: opacity
			duration: $animation-speed

	&::before
		+ratio(nth($logo-size, 2), nth($logo-size, 1))
		background: url(../../img/logo.png) no-repeat

		+media('<tab-lg')
			+ratio(nth($logo-short-size, 2), nth($logo-short-size, 1))
			background: none

		.header-is-top &
			opacity: 0

	&::after
		position: absolute
		left: 50%
		top: 50%
		opacity: 0
		+size(nth($logo-short-size, 2), nth($logo-short-size, 1))
		background: url(../../img/logo-short.png) no-repeat
		margin: -#{round(nth($logo-short-size, 1)/2-1)} 0 0 -#{round(nth($logo-short-size, 2)/2-1)}

		+media('<tab-lg')
			opacity: 1
			margin: -#{round(nth($logo-short-size, 1)/2)} 0 0 -#{round(nth($logo-short-size, 2)/2)}

		.header-is-top &
			opacity: 1

	a, & > span
		position: absolute
		left: 0
		top: 50%
		width: 100%
		height: 100%
		display: block
		z-index: 1
		transform: translate(0, -50%)
		will-change: transform

		.header-is-top &
			height: nth($logo-short-size, 1)

/* logo end
/* === HEADER end ===

/* === NAVIGATION ===
.nav-wrap, .nav-footer
	&::before
		position: absolute
		content: ""
		display: none
		top: 0
		left: 20px
		right: 20px
		border: solid #cfb9aa
		border-width: 0

		+media('<tab-lg')
			display: block

.nav-wrap
	display: inline-block // для ие
	vertical-align: top // для ие

	+media('<tab-lg')
		display: flex
		flex-direction: column
		position: fixed
		left: 0
		bottom: 0
		width: 100%
		height: calc(100% - #{$header-height})
		background-color: $base-color-alt
		opacity: 0
		visibility: hidden
		transition:
			property: opacity, visibility
			duration: $animation-speed

	&.active
		+media('<tab-lg')
		+media('<tab-lg')
			opacity: 1
			visibility: visible

	&::before
		border-bottom-width: 1px

.nav
	position: relative
	width: 100%

	+media('<tab-lg')
		display: flex
		flex: 1 1
		justify-content: center
		align-items: center

.nav__list
	+clear

	+media('<tab-lg')
		width: 100%
		max-height: 100%
		overflow-x: hidden
		overflow-y: auto

	li
		float: left

		+media('<tab-lg')
			float: none
			display: block

	a
		padding: 10px 30px
		display: block
		display: flex
		align-items: center
		height: $header-height
		+font(2.4rem, round-float(30/24, 2))
		color: #e7dad2
		text-decoration: none

		+media('<desk-lg')
			+padding-horizontal(15px)

		+media('<desk-md')
			font-size: 2rem

		+media('<desk-sm')
			+padding-horizontal(8px)
			font-size: 1.8rem

		+media('<tab-lg')
			color: $text-color
			+font-medium
			+font(3.6rem, round-float(48/36, 2))
			padding: 9px 20px
			text-align: center
			justify-content: center
			height: auto

	// hover
	.no-touchevents &
		a:hover
			box-shadow: inset 0 -2px 0 $base-color

			+media('<tab-lg')
				box-shadow: none

	// current
	li.current
		a
			color: white
			background-color: #c4161c

			+media('<tab-lg')
				background-color: transparent
				color: $base-color


.nav-footer
	position: relative
	display: none

	+media('<tab-lg')
		display: flex
		width: 100%
		min-height: $header-height

	&::before
		border-top-width: 1px

/* === NAVIGATION end ===

///* === SIDEBAR ===
//.sidebar
	display: inline
	float: left
	margin: 0 0 0 -100%
	width: $sidebar-width

	background-color: sandybrown

	+media('<tab-lg')
		display: none

///* === SIDEBAR end ===

///* === ASIDE ===
//.aside
	display: inline
	float: right
	margin: 0 0 0 -#{$aside-width}
	width: $aside-width
	background-color: sandybrown

	+media('<desk-lg')
		display: none

///* === ASIDE end ===

/* === FOOTER ===
.footer
	//margin: 0 auto
	position: relative
	clear: both
	z-index: 3

.footer__holder
	overflow: hidden
	cursor: default
	padding: $footer-grid-space
	border: solid #5a534f
	border-width: 1px 0 0

/* footer bottom
.footer-bottom
	position: relative
	// обрезать вытянутый маржинами по горизонтале дочерний элемент
	overflow: hidden

.footer-bottom__holder
	position: relative
	display: flex
	flex-wrap: wrap
	+margin-horizontal(-#{round(nth($grid-space, 2)/2)})
	margin-bottom: -#{round(nth($grid-space, 1)/2)}

.footer-bottom__col
	text-align: center
	+padding-horizontal(round(nth($grid-space, 2)/2))
	margin-bottom: #{round(nth($grid-space, 1)/2)}
	// для браузеров не поддерживающих display: flex
	display: inline-block
	vertical-align: top
	width: calc(33.33%)

	+media('<mob-lg')
		min-width: 100%

	&:first-child
		+media('>=mob-lg')
			text-align: left

	&:last-child
		+media('>=mob-lg')
			text-align: right

	a
		color: inherit
		text-decoration: none

		.no-touchevents &:hover
			text-decoration: underline

/* footer bottom end

/* developer
.developer
	display: inline-block
	min-height: 25px

	a
		text-decoration: none

		.no-touchevents &:hover
			text-decoration: none

.developer__label
	+media('<mob-lg')
		display: block

	i
		+media('<mob-lg')
			display: none

.developer__logo
	+display-inline-block-top
	position: relative
	top: 5px
	padding-right: 3px
	+size(154px, 20px)
	text-align: left
	text-indent: -9999px
	color: white

	&::before, &::after
		+pseudo()
		+position(0, 0)
		+size(149px, 16px)

	&::before
		+pseudo()
		+position(4px, 4px)
		background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTMyIDc5LjE1OTI4NCwgMjAxNi8wNC8xOS0xMzoxMzo0MCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUuNSAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTA2ODc1N0UwOEJDMTFFNzlCNzhBOUI2REQxMjc4QzgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTA2ODc1N0YwOEJDMTFFNzlCNzhBOUI2REQxMjc4QzgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5MDY4NzU3QzA4QkMxMUU3OUI3OEE5QjZERDEyNzhDOCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5MDY4NzU3RDA4QkMxMUU3OUI3OEE5QjZERDEyNzhDOCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnDruBQAAAAkSURBVHjaYmRgYPjPACL+/2cE0YwYAkAGA5jByPgfqwBAgAEAP4gP/bFMMZQAAAAASUVORK5CYII=')
		background-size: 2px

	.no-touchevents a:hover
		transform: translate(0, 1px)
		filter: blur(2px)
		opacity: 0.6

	&::after
		+pseudo()
		background: #cc373c url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAAgBAMAAABa5liJAAAAMFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABaPxwLAAAAD3RSTlMAd7tEIt0R7pkzzIhmqlV9QenDAAAD2klEQVRYw+2WPYsTURSGj5oEs0lMBkUUlMSUWkxwxNKsnV2ihWCVbGXpFwhWs6Io2GT0D2xQsM2KqGUEEUvFwjbxF7irO2ZMsh7PuRvP3Xuv2mhhkRd258zuvc/7bOaDhXnmmedvUi79S1rK2wcqp99XnyzSwVOhib4fBJWl98ciOuS9GsCuQzR5HNLY4akdW1ovDc6OvUCLPS7wPJ5lEKBU6FJJDiezI4Wa6qhCAny4AKwTIiZtgJ3YpLrPAICcNYAi7+ggAHyET7Udw22c4jrQYiQ1pJwFGTRQKnSpJI0xcAbxE+8e4R5Uq+HVajUCwCOHWyM6Qnn05BlWWGs60/K81lmPu7ELELJW+KF+wj8vHEPr5oEeLsuggVKhSyUrE+SzPbx+Fr8CHCwR9h1AFh9DpjdlrVhp6TXFeAPyMWudGfXvJovCMbRqkOp9kUGAUqGBOv3zuEqH3QRwtaB3GaAworqLMWklOLS0kgkUJgjshWQlHEsLGpsyaKCucLVaq4MmUOWvtfw1IiXqlolg57pfMbXq32NoXBMt4ThaC2MZNFAqXK0s1srf1KrSLz8tUn77HZhZIq1PXyyttTAqP+e646P+iyQSjq21M5ZBA6XC1cqNoDHhpzfcXHS18ryv/JVOMkor/dnW6iy3IqrL0C1/ctAUjq1FG2UQoFS4WukEFmIe3uDm0NK6daozbgMM1tTZO9LKY2RqNVdujIHrXsHb2p6hcGyt+lQGDZQKV2vlO+2NaEh1MH5palHu8OkWpUJamXDZ1Kqkx+ukJW954ZhaS2FXBg2UClerfxlSuKp4L9AUx3O9RJ3qTwvKG4ZWubIDN7ZpCcfQengU40gGDZQKV6v1jr6aoPIau+a9lVfCnS1KibUuJpZWiuj6aRGO9ZYf7QcZNFAqHK0sPg2CwTdQyfhTUwvKX7j7mzyJ9IQsmVrgv7S1mGNo7Q0iABk0UCocrRxyJrOzxrqldZEdPk1VQcRaKfQsLQBDSzhFhhZm7wWODAKUCkcrjZyxvAItrRyTLvHGdAysBZ2zrpavtTRngdctbLpaApQKV2uFxXO4CCpv7YuYQhoLOCSB6ZZWI96uNXC0hLObofWpqyVAqXC1+vxmy9JvC68A7ofXLS3obABtvNJewi5rcRtrBUHvUVD7udJfFp5wSOIR7ArPu1oClApHix9EStiFIlJGka3VSPiP5+vcZi1mb/9/y1+1iZrTx888uFoClAobkuWfK+GdIWK8H2ytAl+KrK8ebKUFvqFVsomas6eHeBt+pSVAqRCImyBow2+SCSL4c1wO76r9CTjPPPP8x/kBIrOdsjg4YcgAAAAASUVORK5CYII=') no-repeat center center
		background-size: auto 16px

// hover
.no-touchevents a:hover
	.developer__logo
		color: black

		&::after
			background-color: #00ef85

/* developer end
/* === FOOTER end ===

/* shutter overlay
.shutter-overlay
	position: fixed
	left: 0
	top: 0
	bottom: 0
	width: 100%
	background-color: black
	visibility: hidden
	opacity: 0
	z-index: 10
	transition:
		property: opacity, visibility
		duration: $animation-speed
		timing-function: cubic-bezier(0.65, 0.05, 0.36, 1)

	&.active
		visibility: visible
		opacity: 0.35

		.shutter-only-mob &
			+media('>=tab-lg')
				display: none // скрывать на десктопе, если shutter-only-mob

/* shutter overlay end

/* btn-to-top
.btn-to-top
	$btn-tt-bg-color: $text-color
	//==============
	position: fixed
	right: 0
	top: 50%
	width: nth($page-layout-space, 2)
	+font-light
	+font(2.4rem, round-float(24/24, 2))
	color: #5a534f
	text-align: center
	z-index: 10 // под хедером, но над контентом и футером
	$prop: background-color, opacity, visibility
	will-change: $prop
	opacity: 0
	visibility: hidden
	transition:
		property: $prop
		duration: $animation-speed

	+media('<desk-sm')
		width: nth($page-layout-space--md, 2)

	+media('<tab-lg')
		display: none

	span
		display: block

	svg
		transform: rotate(0.5turn)
		display: inline-block
		vertical-align: top

	path
		fill: currentColor

	&.btn-to-top--show
		opacity: 1
		visibility: visible

	.no-touchevents &:hover
		color: $base-color

/* btn-to-top end